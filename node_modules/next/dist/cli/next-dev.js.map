{"version":3,"sources":["../../src/cli/next-dev.ts"],"names":["nextDev","dir","config","isTurboSession","sessionStopHandled","sessionStarted","Date","now","handleSessionStop","eventCliSessionStopped","require","loadConfig","PHASE_DEVELOPMENT_SERVER","undefined","telemetry","traceGlobals","get","Telemetry","distDir","path","join","pagesDir","appDir","pagesResult","findPagesDir","record","cliCommand","turboFlag","durationMilliseconds","flushDetached","_","process","stdout","write","exit","on","watchConfigFiles","dirToWatch","onChange","wp","Watchpack","watch","files","CONFIG_FILES","map","file","createRouterWorker","isNodeDebugging","checkIsNodeDebugging","worker","Worker","resolve","numWorkers","maxRetries","forkOptions","execArgv","genRouterWorkerExecArgv","env","FORCE_COLOR","initialEnv","NODE_OPTIONS","getNodeOptionsWithoutInspect","NEXT_CPU_PROF","__NEXT_PRIVATE_CPU_PROFILE","WATCHPACK_WATCHER_LIMIT","EXPERIMENTAL_TURBOPACK","exposedMethods","cleanup","curWorker","_workerPool","_workers","_child","kill","workerStdout","getStdout","workerStderr","getStderr","data","stderr","off","end","argv","validArgs","Boolean","Number","String","args","getValidatedArgs","console","log","getProjectDir","NEXT_PRIVATE_DEV_DIR","fileExists","FileType","Directory","printAndExit","preflight","skipOnReboot","getPackageVersion","getDependencies","Promise","sassVersion","nodeSassVersion","all","cwd","name","Log","warn","dependencies","devDependencies","command","getNpxCommand","port","getPort","allowRetry","PORT","host","isExperimentalTestProxy","devServerOptions","isDev","hostname","TURBOPACK","rawNextConfig","defaultConfig","validateTurboNextConfig","loadBindings","__isCustomTurbopackBinary","teardownHeapProfiler","eventCliSession","setGlobal","findUp","isCustomTurbopack","experimental","webpackVersion","isSrcDir","relative","startsWith","hasNowJson","isCustomServer","resetEnv","bindings","server","turbo","startDev","showAll","root","findRootDir","catch","flush","forEach","event","runDevServer","reboot","workerInit","startServer","err","error","runningServer","filename","__NEXT_DISABLE_MEMORY_WATCHER","info","basename"],"mappings":"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"}