{"version":3,"sources":["../../../src/experimental/testmode/server.ts"],"names":["interceptTestApis","wrapRequestHandler","testStorage","AsyncLocalStorage","buildProxyRequest","testData","request","url","method","headers","body","cache","credentials","integrity","mode","redirect","referrer","referrerPolicy","api","Array","from","Buffer","arrayBuffer","toString","buildResponse","proxyResponse","status","response","Response","Headers","interceptFetch","originalFetch","global","fetch","testFetch","input","init","next","internal","testInfo","getStore","Error","proxyPort","originalRequest","Request","proxyRequest","resp","JSON","stringify","ok","json","handler","req","res","parsedUrl","proxyPortHeader","Number","testReqInfo","run"],"mappings":"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"}